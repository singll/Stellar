# Stellar 项目运行指南

## 🚀 快速启动

### 1. 基本功能测试（不需要数据库）
```bash
# 测试项目基础功能
go run test_basic.go
```

### 2. 完整开发环境（使用外部数据库）

#### 数据库环境要求
- **MongoDB**: 192.168.7.216:27017 (用户: admin, 密码: admin)
- **Redis**: 192.168.7.128:6379 (密码: redis)

#### 环境数据库分离
- **生产环境**: `stellarserver` (Redis db: 0)
- **开发环境**: `stellarserver_dev` (Redis db: 1)  
- **测试环境**: `stellarserver_test` (Redis db: 2)

#### 启动方式

**方式一：使用Makefile（推荐）**
```bash
# 启动开发环境（前后端同时启动）
make dev
```

**方式二：手动启动**
```bash
# 1. 启动后端 (监听 0.0.0.0:8090)
go run ./cmd/main.go -config config.dev.yaml -log-level debug

# 2. 新终端启动前端 (监听 0.0.0.0:5173)
cd web
pnpm install
pnpm run dev
```

**方式三：单独启动后端**
```bash
# 使用快速启动脚本
./start.sh
```

## 📋 当前功能状态

### ✅ 已完成且可测试的功能
- **项目配置系统** - 支持多环境配置，外部数据库连接
- **JWT认证机制** - 安全的token管理
- **错误处理系统** - 统一的错误处理
- **前端基础架构** - Svelte 5 + SvelteKit
- **API客户端** - 类型安全的Axios配置
- **登录页面** - 完整的表单验证
- **网络配置** - 支持0.0.0.0监听，便于容器化部署

### ⚠️ 需要数据库的功能
- **用户注册/登录** - 需要MongoDB存储用户数据
- **项目管理** - 项目CRUD操作
- **资产管理** - 资产数据管理

### ❌ 尚未实现的功能
- **扫描功能** - 子域名枚举、端口扫描等
- **完整的认证流程** - 需要数据库支持

## 🔧 开发环境配置

### 配置文件说明
- `config.yaml` - 生产环境配置 (stellarserver, Redis db:0)
- `config.dev.yaml` - 开发环境配置 (stellarserver_dev, Redis db:1)
- `config.test.yaml` - 测试环境配置 (stellarserver_test, Redis db:2)

### 网络配置
- **后端服务**: 监听 0.0.0.0:8090
- **前端服务**: 监听 0.0.0.0:5173
- **API代理**: 前端 `/api` 请求自动转发到后端

### 数据库连接
- **MongoDB**: 192.168.7.216:27017
- **Redis**: 192.168.7.128:6379
- **环境隔离**: 通过不同数据库名和Redis db号区分

## 🧪 测试验证

### 基础功能测试
```bash
# 配置加载测试
go run test_basic.go

# 前端依赖检查
cd web && pnpm install

# 前端构建测试
cd web && pnpm run build
```

### 网络访问测试
启动服务后可通过以下地址访问：
- **后端健康检查**: `http://0.0.0.0:8090/api/v1/health`
- **前端界面**: `http://0.0.0.0:5173`
- **API文档**: `http://0.0.0.0:8090/api/v1/docs`

## 🐳 容器化部署

### Docker环境变量
```bash
# 后端服务
docker run -p 8090:8090 \
  -e MONGO_URI=mongodb://192.168.7.216:27017 \
  -e REDIS_ADDR=192.168.7.128:6379 \
  stellar-backend

# 前端服务  
docker run -p 5173:5173 \
  -e VITE_API_URL=http://0.0.0.0:8090 \
  stellar-frontend
```

### 网络配置优势
- ✅ 支持容器内外访问
- ✅ 便于Docker部署
- ✅ 支持集群环境
- ✅ 便于负载均衡配置

## 🔄 下一步开发建议

基于DEV_PLAN/0.1.md，建议按以下顺序完善：

1. **数据库连接测试** - 验证外部数据库连接
2. **认证API实现** - 完善用户注册/登录逻辑
3. **前端认证完善** - 添加token刷新和错误处理
4. **环境数据隔离** - 测试不同环境数据库分离
5. **容器化部署** - 构建Docker镜像

## 🚨 配置注意事项

### 安全配置
1. **JWT密钥**: 不同环境使用不同密钥
2. **数据库密码**: 生产环境需要使用环境变量
3. **网络访问**: 0.0.0.0监听需要配置防火墙

### 性能配置
1. **连接池**: 不同环境使用不同连接池大小
2. **并发限制**: 开发环境降低并发以减少资源消耗
3. **超时设置**: 测试环境使用较短超时时间

### 数据库管理
1. **数据隔离**: 严格按环境使用不同数据库
2. **备份策略**: 生产环境定期备份
3. **监控告警**: 数据库连接状态监控

## 📚 相关文档
- [DEV_PLAN.md](DEV_PLAN.md) - 完整开发计划
- [DEV_PLAN/0.1.md](DEV_PLAN/0.1.md) - 认证模块详细计划
- [项目状态报告.md](项目状态报告.md) - 当前实现状态分析