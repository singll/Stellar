# æ˜Ÿç»œï¼ˆStellarï¼‰é¡¹ç›®å¼€å‘è§„èŒƒ

## é¡¹ç›®ç®€ä»‹

**æ˜Ÿç»œï¼ˆStellarï¼‰** æ˜¯åŸºäº ScopeSentry é¡¹ç›®çš„ Go è¯­è¨€é‡æ„ç‰ˆæœ¬ï¼Œæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„åˆ†å¸ƒå¼å®‰å…¨èµ„äº§ç®¡ç†å’Œæ¼æ´æ‰«æå¹³å°ã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå…·å¤‡é«˜æ€§èƒ½ã€é«˜å¯ç”¨æ€§å’Œé«˜æ‰©å±•æ€§ã€‚

## æŠ€æœ¯æ ˆè§„èŒƒ

### åç«¯æŠ€æœ¯æ ˆ [P0]
- **è¯­è¨€/è¿è¡Œæ—¶**ï¼šGo 1.24.3
- **Web æ¡†æ¶**ï¼šGin 1.10+
- **æ•°æ®åº“**ï¼šMongoDB 6.0+ï¼ˆä¸»åº“ï¼‰ã€Redis 7.0+ï¼ˆç¼“å­˜/ä¼šè¯ï¼‰
- **è®¤è¯**ï¼šJWTï¼ˆgolang-jwt/jwt/v4ï¼‰ã€bcrypt
- **é…ç½®**ï¼šYAML é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒç¯å¢ƒå˜é‡
- **æ—¥å¿—**ï¼šzerolog
- **WebSocket**ï¼šgorilla/websocket
- **DNS/ç½‘ç»œ**ï¼šmiekg/dnsã€è‡ªç ”ç½‘ç»œæ‰«æ
- **ä»»åŠ¡è°ƒåº¦**ï¼šrobfig/cron/v3ã€goroutine+channel
- **ä¾èµ–ç®¡ç†**ï¼šgo mod
- **æµ‹è¯•**ï¼šGo testingã€testify
- **æ„å»º/è„šæœ¬**ï¼šMakefile

### å‰ç«¯æŠ€æœ¯æ ˆ [P0]
- **æ¡†æ¶**ï¼šSvelte 5.7.0 + SvelteKit 2.0+
- **æ„å»ºå·¥å…·**ï¼šVite 6.0+
- **è¯­è¨€**ï¼šTypeScript 5.0+
- **UI ç»„ä»¶**ï¼šshadcn-svelte 0.9.0ã€bits-uiã€Tailwind CSS 3.4.1
- **çŠ¶æ€ç®¡ç†**ï¼šSvelte 5 runesã€@tanstack/store
- **HTTP**ï¼šaxios 1.6.0
- **è¡¨å•/æ ¡éªŒ**ï¼šfelte 1.3.0ã€zod 3.22.4
- **å›¾æ ‡/ä¸»é¢˜**ï¼š@iconify/svelteã€phosphor-svelteã€@radix-ui/colors
- **æµ‹è¯•**ï¼švitestã€@testing-library/svelteã€cypressã€msw
- **åŒ…ç®¡ç†**ï¼špnpm 8+

### å¼€å‘/éƒ¨ç½²ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**ï¼šå¼€å‘ Windows 10+/macOS 10.15+/Linuxï¼Œç”Ÿäº§ Linux (Ubuntu 22.04+/CentOS 8+)
- **IDE**ï¼šVSCode/GoLand
- **Node.js**ï¼š20+
- **æ•°æ®åº“å·¥å…·**ï¼šMongoDB Compassã€Redis Desktop Manager
- **å®¹å™¨åŒ–**ï¼šDocker 20.10+ã€Docker Compose v2.0+
- **CI/CD/ç›‘æ§**ï¼šæ¨è Prometheusã€Grafanaã€GitHub Actions

### æ’ä»¶ç³»ç»Ÿ
- **æ”¯æŒç±»å‹**ï¼šYAML æ’ä»¶ã€Go æ’ä»¶ã€Python æ’ä»¶
- **æ’ä»¶åˆ†ç±»**ï¼šscanner/info_gatherer/vulnerability/utility/custom
- **æ’ä»¶é¢†åŸŸ**ï¼šsubdomain/port/web/network/osint/misc

### å®‰å…¨ä¸æ€§èƒ½
- **è®¤è¯å®‰å…¨**ï¼šJWTã€å¼ºå¯†ç ã€æœ€å°æƒé™
- **ç½‘ç»œå®‰å…¨**ï¼šHTTPSã€CORSã€XSS/SQLæ³¨å…¥é˜²æŠ¤
- **æ•°æ®å®‰å…¨**ï¼šåŠ å¯†å­˜å‚¨ã€å¤‡ä»½ã€å®¡è®¡æ—¥å¿—
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¹¶å‘æ§åˆ¶ã€è¿æ¥æ± ã€ç¼“å­˜ã€é™æµ

---

## ç»“æ„ä¸è§„èŒƒ

### æ•´ä½“é¡¹ç›®ç»“æ„ [P0]

```
Stellar/
â”œâ”€â”€ ScopeSentry-main/       # åŸPythonåç«¯é¡¹ç›® (å‚è€ƒ)
â”œâ”€â”€ ScopeSentry-UI-main/    # åŸVueå‰ç«¯é¡¹ç›® (å‚è€ƒ)
â”œâ”€â”€ cmd/                    # Goåº”ç”¨å…¥å£
â”œâ”€â”€ internal/               # Goå†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ api/               # HTTP API å¤„ç†å™¨
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ web/                   # Svelteå‰ç«¯é‡æ„ç›®å½•
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/           # ç»„ä»¶åº“å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ routes/        # SvelteKit è·¯ç”±
â”‚   â”‚   â””â”€â”€ app.html       # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ static/            # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ config.yaml            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ go.mod                 # Go æ¨¡å—
â””â”€â”€ start-dev.bat          # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
```

### å‰ç«¯é‡æ„ç›®å½•ç»“æ„ [P0]

```
web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/               # ç»„ä»¶åº“å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ components/    # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/        # shadcn-svelte UIç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...        # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ routes/            # SvelteKit è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ (app)/         # éœ€è®¤è¯çš„åº”ç”¨é¡µé¢ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/ # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/    # èµ„äº§ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ ...        # å…¶ä»–åº”ç”¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (auth)/        # æ— éœ€è®¤è¯çš„é¡µé¢ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ login/     # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ ...        # å…¶ä»–è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ +layout.svelte # å…¨å±€æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ +page.svelte   # æ ¹é¡µé¢ (é€šå¸¸é‡å®šå‘æˆ–ä½œä¸ºæ¬¢è¿é¡µ)
â”‚   â””â”€â”€ app.html           # HTML æ¨¡æ¿
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”œâ”€â”€ package.json
â””â”€â”€ svelte.config.js
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### å®‰å…¨æ‰«æåŠŸèƒ½ [P0]
- **èµ„äº§æµ‹ç»˜**: è‡ªåŠ¨å‘ç°å’Œæ˜ å°„ç½‘ç»œèµ„äº§
- **å­åŸŸåæšä¸¾**: å…¨é¢æ”¶é›†å­åŸŸåä¿¡æ¯
- **ç«¯å£æ‰«æ**: è¯†åˆ«å¼€æ”¾ç«¯å£å’ŒæœåŠ¡
- **æ¼æ´æ‰«æ**: æ£€æµ‹å¸¸è§å®‰å…¨æ¼æ´
- **æ•æ„Ÿä¿¡æ¯æ£€æµ‹**: å‘ç°æ•æ„Ÿæ•°æ®æ³„éœ²
- **å­åŸŸåæ¥ç®¡æ£€æµ‹**: è¯†åˆ«å¯èƒ½è¢«æ¥ç®¡çš„å­åŸŸå
- **ç½‘é¡µçˆ¬è™«**: è‡ªåŠ¨çˆ¬å–ç½‘ç«™å†…å®¹
- **é¡µé¢ç›‘æ§**: æ£€æµ‹ç½‘é¡µå˜æ›´

### åˆ†å¸ƒå¼æ¶æ„ [P0]
- **å¤šèŠ‚ç‚¹æ‰«æ**: åˆ†å¸ƒå¼æ‰«ææ¶æ„
- **ä»»åŠ¡åˆ†å‘**: ä¸»èŠ‚ç‚¹ç®¡ç†ä»»åŠ¡åˆ†å‘
- **ç»“æœèšåˆ**: ç»Ÿä¸€æ”¶é›†æ‰«æç»“æœ
- **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰æ‰©å±•åŠŸèƒ½

## API æ¥å£è§„èŒƒ

### åç«¯ API è®¾è®¡ [P0]

ã€å¿…é¡»ã€‘éµå¾ª RESTful è®¾è®¡ï¼Œä¿æŒä¸åŸ ScopeSentry API å…¼å®¹ï¼š

```go
// âœ… æ­£ç¡® - API å“åº”ç»“æ„ (å…¼å®¹åŸé¡¹ç›®)
type APIResponse struct {
    Code    int         `json:"code"`
    Message string      `json:"message"`
    Data    interface{} `json:"data,omitempty"`
}

// âœ… æ­£ç¡® - é”™è¯¯å¤„ç†
func (h *Handler) handleError(c *gin.Context, err error, code int) {
    utils.Error("APIé”™è¯¯", err)
    c.JSON(code, APIResponse{
        Code:    code,
        Message: err.Error(),
    })
}

// âœ… æ­£ç¡® - æˆåŠŸå“åº”
func (h *Handler) handleSuccess(c *gin.Context, data interface{}) {
    c.JSON(http.StatusOK, APIResponse{
        Code:    200,
        Message: "success",
        Data:    data,
    })
}
```

### æ ¸å¿ƒAPIè·¯ç”± [P0]

```go
// âœ… æ­£ç¡® - æ ¸å¿ƒAPIè·¯ç”±æ³¨å†Œ
apiV1 := router.Group("/api/v1")

// ç”¨æˆ·è®¤è¯
authHandler.RegisterRoutes(apiV1.Group("/auth"))

// é¡¹ç›®ç®¡ç†
projectHandler.RegisterRoutes(apiV1.Group("/projects"))

// èµ„äº§ç®¡ç†
assetHandler.RegisterRoutes(apiV1.Group("/assets"))

// ä»»åŠ¡ç®¡ç†
taskHandler.RegisterRoutes(apiV1.Group("/tasks"))

// èŠ‚ç‚¹ç®¡ç†
nodeHandler.RegisterRoutes(apiV1.Group("/nodes"))

// æ¼æ´æ‰«æ
vulnHandler.RegisterRoutes(apiV1.Group("/vulnerabilities"))

// ç«¯å£æ‰«æ
portScanHandler.RegisterRoutes(apiV1.Group("/portscan"))

// å­åŸŸåæšä¸¾
subdomainHandler.RegisterRoutes(apiV1.Group("/subdomains"))

// æ’ä»¶ç®¡ç†
pluginHandler.RegisterRoutes(apiV1.Group("/plugins"))

// ç›‘æ§
monitoringHandler.RegisterRoutes(apiV1.Group("/monitoring"))

// æ•æ„Ÿä¿¡æ¯
sensitiveHandler.RegisterRoutes(apiV1.Group("/sensitive"))

// ç»Ÿè®¡æ•°æ®
statsHandler.RegisterRoutes(apiV1.Group("/statistics"))
```

### å‰ç«¯ API è°ƒç”¨ [P0]

ã€**é‡è¦è§„èŒƒ**ã€‘é¡¹ç›®ä¸­ã€å¿…é¡»ã€‘ä½¿ç”¨ä½äº `web/src/lib/api/axios-config.ts` çš„**å”¯ä¸€å…±äº« `api` å®ä¾‹**è¿›è¡Œæ‰€æœ‰åç«¯é€šä¿¡ã€‚ä¸¥ç¦åˆ›å»ºæ–°çš„ `axios` å®ä¾‹æˆ–ä½¿ç”¨åŸç”Ÿçš„ `fetch` æ–¹æ³•ç›´æ¥è°ƒç”¨APIã€‚è¿™ç¡®ä¿äº†æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡ç»Ÿä¸€çš„æ‹¦æˆªå™¨å¤„ç†ï¼ˆå¦‚JWTä»¤ç‰Œåˆ·æ–°ã€é”™è¯¯å¤„ç†ç­‰ï¼‰ã€‚

// âŒ é”™è¯¯ - åˆ›å»ºäº†æ–°çš„å®ä¾‹æˆ–ä½¿ç”¨fetch
const newApiClient = axios.create(); // ä¸¥ç¦ï¼
fetch('/api/v1/some-endpoint'); // ä¸¥ç¦ï¼

// âœ… æ­£ç¡® - å¤ç”¨å…±äº«å®ä¾‹
import api from '$lib/api/axios-config';
api.get('/my-endpoint');


ã€**æ¨èå®è·µ**ã€‘å°†å„æ¨¡å—çš„APIè°ƒç”¨å°è£…åœ¨ä¸“é—¨çš„ Service æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ `web/src/lib/api/auth.ts` ç”¨äºå¤„ç†è®¤è¯ç›¸å…³è¯·æ±‚ã€‚

```typescript
// âœ… æ­£ç¡® - API æœåŠ¡å°è£…
export class AssetService {
  static async getAssets(params?: AssetQueryParams): Promise<Asset[]> {
    const response = await api.get('/assets', { params });
    return response.data.data;
  }

  static async createAsset(asset: CreateAssetRequest): Promise<Asset> {
    const response = await api.post('/assets', asset);
    return response.data.data;
  }
}

export class ProjectService {
  static async getProjects(): Promise<Project[]> {
    const response = await api.get('/projects');
    return response.data.data;
  }

  static async createProject(project: CreateProjectRequest): Promise<Project> {
    const response = await api.post('/projects', project);
    return response.data.data;
  }
}
```

## çŠ¶æ€ç®¡ç†è§„èŒƒ

### å‰ç«¯çŠ¶æ€ç®¡ç† [P0]

ã€**é‡è¦è§„èŒƒ**ã€‘Svelte Storeï¼ˆæˆ–TanStack Storeï¼‰çš„æ ¸å¿ƒèŒè´£æ˜¯**çŠ¶æ€ç®¡ç†**ï¼Œè€Œä¸æ˜¯æ•°æ®è·å–ã€‚Store å†…éƒ¨ã€ä¸¥ç¦ã€‘åŒ…å«ä»»ä½•ç›´æ¥çš„APIè°ƒç”¨é€»è¾‘ï¼ˆå¦‚ `fetch` æˆ–ç›´æ¥ä½¿ç”¨ `axios`ï¼‰ã€‚

æ•°æ®äº¤äº’çš„æ­£ç¡®æµç¨‹æ˜¯ï¼š
1. åœ¨Svelteç»„ä»¶ï¼ˆå¦‚ `+page.svelte` çš„ `handleSubmit` å‡½æ•°ï¼‰æˆ– SvelteKit çš„ `load` å‡½æ•°ä¸­è°ƒç”¨APIæœåŠ¡å±‚çš„æ–¹æ³•ï¼ˆä¾‹å¦‚ `authApi.login()`ï¼‰ã€‚
2. APIæœåŠ¡å±‚è´Ÿè´£ä¸åç«¯é€šä¿¡ã€‚
3. ç»„ä»¶åœ¨APIè°ƒç”¨æˆåŠŸåï¼Œå°†è¿”å›çš„æ•°æ®ï¼ˆå¦‚ `token` å’Œ `user`ï¼‰ä¼ é€’ç»™ Store çš„ action (ä¾‹å¦‚ `auth.login(data)`)ã€‚
4. Store çš„ action ä»…è´Ÿè´£æ›´æ–°å†…éƒ¨çŠ¶æ€ã€‚

// âŒ é”™è¯¯ - Store å†…éƒ¨åŒ…å« API è°ƒç”¨
function createAuthStore() {
  // ...
  return {
    login: async (credentials) => {
      // ä¸¥ç¦åœ¨ store å†…éƒ¨ç›´æ¥ fetch!
      const response = await fetch('/api/v1/auth/login', { /* ... */ });
      // ... æ›´æ–°çŠ¶æ€
    }
  }
}

// âœ… æ­£ç¡® - Store ä»…è´Ÿè´£çŠ¶æ€æ›´æ–°
function createAuthStore() {
  // ...
  return {
    login: (data: { token: string; user: User }) => {
      // åªè´Ÿè´£æ›´æ–°çŠ¶æ€
      update(state => ({ ...state, user: data.user, token: data.token }));
    }
  }
}


ã€**æ¨èå®è·µ**ã€‘æ ¹æ®çŠ¶æ€çš„å¤æ‚åº¦å’ŒèŒƒå›´é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼š

```typescript
// âœ… ç®€å•çŠ¶æ€ - Svelte 5 runes
import { writable } from 'svelte/store';

export const user = writable<User | null>(null);
export const theme = writable<'light' | 'dark'>('light');

// âœ… å¤æ‚çŠ¶æ€ - TanStack Store
import { Store } from '@tanstack/store';

interface AppState {
  assets: Asset[];
  selectedAsset: Asset | null;
  filters: AssetFilters;
  projects: Project[];
  currentProject: Project | null;
}

export const appStore = new Store<AppState>({
  assets: [],
  selectedAsset: null,
  filters: {},
  projects: [],
  currentProject: null,
});
```

## è®¤è¯ä¸æˆæƒè§„èŒƒ

### JWT è®¤è¯æµç¨‹ [P0]

```go
// âœ… åç«¯ - JWT ä¸­é—´ä»¶
func AuthMiddleware() gin.HandlerFunc {
    return func(c *gin.Context) {
        token := c.GetHeader("Authorization")
        if token == "" {
            c.JSON(401, gin.H{"error": "æœªæˆæƒ"})
            c.Abort()
            return
        }
        
        // éªŒè¯ JWT token
        claims, err := validateJWT(token)
        if err != nil {
            c.JSON(401, gin.H{"error": "ä»¤ç‰Œæ— æ•ˆ"})
            c.Abort()
            return
        }
        
        c.Set("user", claims)
        c.Next()
    }
}
```

```typescript
// âœ… å‰ç«¯ - è®¤è¯çŠ¶æ€ç®¡ç†
import { writable } from 'svelte/store';

interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
}

export const authStore = writable<AuthState>({
  user: null,
  token: null,
  isAuthenticated: false,
});

export const login = async (credentials: LoginCredentials) => {
  const response = await api.post('/auth/login', credentials);
  const { token, user } = response.data.data;
  
  localStorage.setItem('token', token);
  authStore.set({
    user,
    token,
    isAuthenticated: true,
  });
};
```

## æ•°æ®åº“æ“ä½œè§„èŒƒ

### MongoDB æ“ä½œ [P0]

ã€å¿…é¡»ã€‘ä½¿ç”¨ç»Ÿä¸€çš„æ•°æ®è®¿é—®å±‚ï¼š

```go
// âœ… æ­£ç¡® - Repository æ¨¡å¼
type AssetRepository struct {
    db *mongo.Database
}

func (r *AssetRepository) Create(ctx context.Context, asset *models.Asset) error {
    collection := r.db.Collection("assets")
    _, err := collection.InsertOne(ctx, asset)
    return err
}

func (r *AssetRepository) FindByID(ctx context.Context, id string) (*models.Asset, error) {
    collection := r.db.Collection("assets")
    var asset models.Asset
    
    objectID, err := primitive.ObjectIDFromHex(id)
    if err != nil {
        return nil, err
    }
    
    err = collection.FindOne(ctx, bson.M{"_id": objectID}).Decode(&asset)
    if err != nil {
        return nil, err
    }
    
    return &asset, nil
}
```

## é”™è¯¯å¤„ç†è§„èŒƒ

### ç»Ÿä¸€é”™è¯¯å¤„ç† [P0]

```go
// âœ… åç«¯é”™è¯¯å¤„ç†
type AppError struct {
    Code    int    `json:"code"`
    Message string `json:"message"`
    Details string `json:"details,omitempty"`
}

func (e *AppError) Error() string {
    return e.Message
}

var (
    ErrNotFound     = &AppError{Code: 404, Message: "èµ„æºæœªæ‰¾åˆ°"}
    ErrUnauthorized = &AppError{Code: 401, Message: "æœªæˆæƒè®¿é—®"}
    ErrValidation   = &AppError{Code: 400, Message: "æ•°æ®éªŒè¯å¤±è´¥"}
)
```

```typescript
// âœ… å‰ç«¯é”™è¯¯å¤„ç†
export class APIError extends Error {
  constructor(
    public code: number,
    public message: string,
    public details?: string
  ) {
    super(message);
    this.name = 'APIError';
  }
}

// API å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.data) {
      const { code, message, details } = error.response.data;
      throw new APIError(code, message, details);
    }
    throw error;
  }
);
```

## å¼€å‘å·¥ä½œæµè§„èŒƒ

### å¼€å‘ç¯å¢ƒå¯åŠ¨ [P0]

ã€å¿…é¡»ã€‘ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬ï¼š

```bash
# Windows ç¯å¢ƒ
start-dev.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
# 1. å¯åŠ¨åç«¯æœåŠ¡
go run cmd/main.go -config config.yaml

# 2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (æ–°ç»ˆç«¯)
cd web
npm install
npm run dev
```

### æ„å»ºéƒ¨ç½² [P0]

```bash
# æ„å»ºå‰ç«¯
cd web
npm run build

# æ„å»ºåç«¯
go build -o stellar cmd/main.go

# è¿è¡Œç”Ÿäº§ç¯å¢ƒ
./stellar -config config.yaml
```

## é‡æ„è¿ç§»è§„èŒƒ

### ä»åŸé¡¹ç›®è¿ç§» [P1]

ã€å‚è€ƒã€‘åŸé¡¹ç›®åŠŸèƒ½è¿ç§»ä¼˜å…ˆçº§ï¼š

**é«˜ä¼˜å…ˆçº§åŠŸèƒ½:**
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] é¡¹ç›®ç®¡ç†
- [ ] èµ„äº§ç®¡ç†
- [ ] å­åŸŸåæšä¸¾
- [ ] ç«¯å£æ‰«æ
- [ ] æ¼æ´æ‰«æ

**ä¸­ä¼˜å…ˆçº§åŠŸèƒ½:**
- [ ] æ•æ„Ÿä¿¡æ¯æ£€æµ‹
- [ ] ç½‘é¡µçˆ¬è™«
- [ ] é¡µé¢ç›‘æ§
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] èŠ‚ç‚¹ç®¡ç†

**ä½ä¼˜å…ˆçº§åŠŸèƒ½:**
- [ ] é«˜çº§æŠ¥å‘Š
- [ ] æ•°æ®å¯¼å‡º
- [ ] ç³»ç»Ÿé…ç½®

### UI/UX è¿ç§»ç­–ç•¥ [P1]

ã€å‚è€ƒã€‘ä» ScopeSentry-UI-main è¿ç§»ï¼š
- ä¿æŒç›¸ä¼¼çš„é¡µé¢å¸ƒå±€å’Œç”¨æˆ·ä½“éªŒ
- ä½¿ç”¨ shadcn-svelte æ›¿ä»£ Element Plus ç»„ä»¶
- ä¿æŒåŸæœ‰çš„åŠŸèƒ½é€»è¾‘å’Œäº¤äº’æ¨¡å¼
- ä¼˜åŒ–æ€§èƒ½å’Œå“åº”å¼è®¾è®¡

## å¼€å‘ç¯å¢ƒè§„èŒƒ [P0]

### ç³»ç»Ÿè¦æ±‚
ã€å¿…é¡»ã€‘éµå¾ªï¼š
- **æ“ä½œç³»ç»Ÿ**: Windows 10+ (x64)
- **Shellç¯å¢ƒ**: PowerShell 7+ (`pwsh.exe`)
- **å¼€å‘å·¥å…·**: 
  - Visual Studio Code æˆ– JetBrains GoLand
  - Git 2.0+
  - Go 1.21+
  - Node.js 20+
  - pnpm 8+

### æœ¬åœ°å¼€å‘é…ç½®
ã€å¿…é¡»ã€‘é…ç½®ï¼š
```powershell
# å®‰è£…å¼€å‘ä¾èµ–
winget install Microsoft.PowerShell
winget install Git.Git
winget install GoLang.Go
winget install OpenJS.NodeJS
npm install -g pnpm

# é…ç½®å¼€å‘ç¯å¢ƒ
git config --global core.autocrlf true
go env -w GO111MODULE=on
go env -w GOPROXY=https://goproxy.cn,direct
```

### å¼€å‘å·¥ä½œæµ
ã€å¿…é¡»ã€‘ä½¿ç”¨ PowerShell 7 å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š
```powershell
# å¯åŠ¨åç«¯æœåŠ¡
cd $PROJECT_ROOT
go run cmd/main.go -config config.yaml

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (æ–°ç»ˆç«¯)
cd web
pnpm install
pnpm dev
```

## éƒ¨ç½²ç¯å¢ƒè§„èŒƒ [P0]

### æœåŠ¡å™¨è¦æ±‚
ã€å¿…é¡»ã€‘æ»¡è¶³ï¼š
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 22.04+ / CentOS 8+)
- **CPU**: 4+ æ ¸å¿ƒ
- **å†…å­˜**: 8GB+
- **å­˜å‚¨**: 100GB+ SSD
- **ç½‘ç»œ**: 100Mbps+

### ä¾èµ–æœåŠ¡
ã€å¿…é¡»ã€‘éƒ¨ç½²ï¼š
- MongoDB 6.0+
- Redis 7.0+
- Nginx 1.20+

### éƒ¨ç½²æ–¹å¼

#### å•æœºéƒ¨ç½²
```bash
# å®‰è£…ä¾èµ–
apt update && apt install -y mongodb redis-server nginx

# æ„å»ºé¡¹ç›®
git clone https://github.com/StellarServer/StellarServer.git
cd StellarServer
go build -o stellar cmd/main.go
cd web && pnpm install && pnpm build

# å¯åŠ¨æœåŠ¡
./stellar -config config.yaml
```

#### Docker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t stellarserver .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 8082:8082 \
  -v /data/stellar:/app/data \
  -e MONGODB_IP=mongodb \
  -e REDIS_IP=redis \
  --name stellarserver \
  stellarserver
```

#### åˆ†å¸ƒå¼éƒ¨ç½²
ã€å¿…é¡»ã€‘é…ç½®ï¼š
- ä¸»èŠ‚ç‚¹ï¼šè´Ÿè´£ä»»åŠ¡åˆ†å‘å’Œç»“æœèšåˆ
- å·¥ä½œèŠ‚ç‚¹ï¼šæ‰§è¡Œæ‰«æä»»åŠ¡
- è´Ÿè½½å‡è¡¡ï¼šä½¿ç”¨ Nginx æˆ–äº‘æœåŠ¡å•†æä¾›çš„è´Ÿè½½å‡è¡¡

```bash
# ä¸»èŠ‚ç‚¹é…ç½®
export NODE_MODE=master
export MONGODB_IP=<ä¸»æ•°æ®åº“åœ°å€>
export REDIS_IP=<ä¸»ç¼“å­˜åœ°å€>
./stellar -config config.yaml

# å·¥ä½œèŠ‚ç‚¹é…ç½®
export NODE_MODE=worker
export MASTER_NODE=<ä¸»èŠ‚ç‚¹åœ°å€>
export WORKER_TOKEN=<å·¥ä½œèŠ‚ç‚¹ä»¤ç‰Œ>
./stellar -config config.yaml
```

### ç¯å¢ƒå˜é‡é…ç½®
ã€å¿…é¡»ã€‘è®¾ç½®ï¼š
```bash
# æ•°æ®åº“é…ç½®
export MONGODB_IP=127.0.0.1
export MONGODB_PORT=27017
export MONGODB_USER=root
export MONGODB_PASSWORD=<å®‰å…¨å¯†ç >
export MONGODB_DATABASE=StellarServer

# Redisé…ç½®
export REDIS_IP=127.0.0.1
export REDIS_PORT=6379
export REDIS_PASSWORD=<å®‰å…¨å¯†ç >

# ç³»ç»Ÿé…ç½®
export TIMEZONE=Asia/Shanghai
export JWT_SECRET=<éšæœºå¯†é’¥>
export NODE_MODE=master|worker
export LOG_LEVEL=info

# å®‰å…¨é…ç½®
export ENABLE_TLS=true
export TLS_CERT=/path/to/cert.pem
export TLS_KEY=/path/to/key.pem
```

### æ€§èƒ½ä¼˜åŒ–
ã€å»ºè®®ã€‘é…ç½®ï¼š
- ç³»ç»Ÿå‚æ•°ä¼˜åŒ–
```bash
# è°ƒæ•´ç³»ç»Ÿé™åˆ¶
ulimit -n 65535
sysctl -w net.ipv4.tcp_max_syn_backlog=8192
sysctl -w net.core.somaxconn=8192
```

- MongoDB ä¼˜åŒ–
```bash
# é…ç½® MongoDB WiredTiger å¼•æ“
mongod --wiredTigerCacheSizeGB 4
```

- Redis ä¼˜åŒ–
```bash
# é…ç½® Redis æœ€å¤§å†…å­˜
redis-cli config set maxmemory 4gb
redis-cli config set maxmemory-policy allkeys-lru
```

### ç›‘æ§å‘Šè­¦
ã€å¿…é¡»ã€‘é…ç½®ï¼š
- ç³»ç»Ÿç›‘æ§ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
- æœåŠ¡ç›‘æ§ï¼šè¿›ç¨‹çŠ¶æ€ã€API å“åº”æ—¶é—´
- ä¸šåŠ¡ç›‘æ§ï¼šæ‰«æä»»åŠ¡ã€èµ„äº§æ•°é‡ã€æ¼æ´ç»Ÿè®¡
- å‘Šè­¦é€šé“ï¼šé‚®ä»¶ã€Webhookã€ä¼ä¸šå¾®ä¿¡

## ğŸ” æ£€æŸ¥æ¸…å•

### åç«¯å¼€å‘ [P0]
- [ ] **[P0]** API è·¯ç”±ï¼šæ˜¯å¦éµå¾ª RESTful è®¾è®¡ï¼Œä½¿ç”¨ `/api/v1/` å‰ç¼€ï¼Ÿ
- [ ] **[P0]** å…¼å®¹æ€§ï¼šAPI æ˜¯å¦ä¸åŸ ScopeSentry é¡¹ç›®ä¿æŒå…¼å®¹ï¼Ÿ
- [ ] **[P0]** é”™è¯¯å¤„ç†ï¼šæ˜¯å¦ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼ï¼Ÿ
- [ ] **[P0]** æ•°æ®åº“æ“ä½œï¼šæ˜¯å¦ä½¿ç”¨ Repository æ¨¡å¼å°è£…æ•°æ®è®¿é—®ï¼Ÿ
- [ ] **[P0]** è®¤è¯æˆæƒï¼šæ˜¯å¦æ­£ç¡®å®ç° JWT ä¸­é—´ä»¶ï¼Ÿ

### å‰ç«¯å¼€å‘ [P0]
- [ ] **[P0]** é¡¹ç›®ç»“æ„ï¼šå‰ç«¯ä»£ç æ˜¯å¦åœ¨ `web/` ç›®å½•ä¸‹ï¼Ÿ
- [ ] **[P0]** æŠ€æœ¯æ ˆï¼šæ˜¯å¦ä½¿ç”¨ Svelte 5 + SvelteKit + TypeScriptï¼Ÿ
- [ ] **[P0]** UI ç»„ä»¶ï¼šæ˜¯å¦ä½¿ç”¨ shadcn-svelte + Tailwind CSSï¼Ÿ
- [ ] **[P0]** API è°ƒç”¨ï¼šæ˜¯å¦ä½¿ç”¨ç»Ÿä¸€çš„ Axios å®¢æˆ·ç«¯ï¼Ÿ
- [ ] **[P0]** åŠŸèƒ½è¿ç§»ï¼šæ˜¯å¦æ­£ç¡®è¿ç§»åŸ Vue é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ

### å…¨æ ˆé›†æˆ [P0]
- [ ] **[P0]** API é€šä¿¡ï¼šå‰åç«¯ API æ¥å£æ˜¯å¦ä¿æŒä¸€è‡´ï¼Ÿ
- [ ] **[P0]** è®¤è¯æµç¨‹ï¼šJWT è®¤è¯æ˜¯å¦åœ¨å‰åç«¯æ­£ç¡®å®ç°ï¼Ÿ
- [ ] **[P0]** é”™è¯¯å¤„ç†ï¼šå‰åç«¯é”™è¯¯å¤„ç†æ˜¯å¦ç»Ÿä¸€ï¼Ÿ
- [ ] **[P0]** å¼€å‘ç¯å¢ƒï¼šæ˜¯å¦å¯ä»¥é€šè¿‡ `start-dev.bat` æ­£å¸¸å¯åŠ¨ï¼Ÿ
- [ ] **[P0]** åŠŸèƒ½å®Œæ•´æ€§ï¼šæ ¸å¿ƒå®‰å…¨æ‰«æåŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ

### é‡æ„è´¨é‡ [P1]
- [ ] **[P1]** æ€§èƒ½ä¼˜åŒ–ï¼šé‡æ„åçš„æ€§èƒ½æ˜¯å¦ä¼˜äºåŸé¡¹ç›®ï¼Ÿ
- [ ] **[P1]** ä»£ç è´¨é‡ï¼šä»£ç æ˜¯å¦éµå¾ª Go å’Œ Svelte æœ€ä½³å®è·µï¼Ÿ
- [ ] **[P1]** å¯ç»´æŠ¤æ€§ï¼šé¡¹ç›®ç»“æ„æ˜¯å¦æ¸…æ™°ã€æ¨¡å—åŒ–ï¼Ÿ
- [ ] **[P1]** æ–‡æ¡£å®Œæ•´æ€§ï¼šæ˜¯å¦æœ‰å®Œæ•´çš„ API æ–‡æ¡£å’Œå¼€å‘æ–‡æ¡£ï¼Ÿ
